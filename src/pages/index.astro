---
import Layout from '~/layouts/PageLayout.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';
import Image from '~/components/common/Image.astro';

const metadata = {
  title: 'חדשות ותובנות בנושא AI - המקור שלך לעדכונים בנושא בינה מלאכותית',
  ignoreTitleTemplate: true,
};

// Featured News Posts
const featuredPosts = [
  {
    title: 'כיצד ארגונים מפיקים ערך אמיתי בעידן ה-AI',
    author: 'רון גולד',
    date: '24 באפריל, 2025',
    category: 'AI בארגונים',
    image: '~/assets/images/hero-image.png',
  },
  {
    title: 'מדריך לשימוש בסביבת העבודה החדשה של Grok',
    author: 'מנהל מערכת',
    date: '24 באפריל, 2025',
    category: 'כלי AI',
    image: '~/assets/images/default.png',
  },
  {
    title: 'ציר הזמן החדש של Lightricks - הכל במקום אחד',
    author: 'אביתר אדרי',
    date: '23 באפריל, 2025',
    category: 'כלי AI',
    image: '~/assets/images/hero-image.png',
  },
];

// Professional Guides
const professionalGuides = [
  {
    title: 'מדריך מקיף להנדסת פרומפטים - מיסודות לטכניקות מתקדמות [חלק 1]',
    author: 'רון גולד',
    date: '22 באפריל, 2025',
    category: 'מדריכים',
    image: '~/assets/images/default.png',
  },
  {
    title: 'מהם ההבדלים בין אוטומציה, אינטגרציה ובינה מלאכותית?',
    author: 'עומר הררי',
    date: '23 באפריל, 2025',
    category: 'מדריכים',
    image: '~/assets/images/hero-image.png',
  },
];

// Latest AI Tools
const aiTools = [
  {
    title: 'ChatGPT',
    description: 'מודל השפה המוביל של OpenAI לשיחה ויצירת טקסט',
    icon: 'tabler:message-chatbot',
    category: 'מודלי שפה',
    image: '~/assets/images/default.png',
  },
  {
    title: 'Midjourney',
    description: 'יצירת תמונות AI מתקדמת דרך Discord',
    icon: 'tabler:photo',
    category: 'יצירת תמונות',
    image: '~/assets/images/hero-image.png',
  },
  {
    title: 'Claude',
    description: 'העוזר של Anthropic לניתוח ויצירת תוכן',
    icon: 'tabler:brain',
    category: 'מודלי שפה',
    image: '~/assets/images/default.png',
  },
  {
    title: 'Pika Labs',
    description: 'יצירה ועריכת וידאו באמצעות AI',
    icon: 'tabler:video',
    category: 'יצירת וידאו',
    image: '~/assets/images/hero-image.png',
  },
];

// AI Courses
const aiCourses = [
  {
    title: 'קורס מאסטר GenAI',
    description: 'שלוט בכלים וטכניקות של AI גנרטיבי',
    image: '~/assets/images/courses/genai.jpg',
  },
  {
    title: 'AI למתחילים',
    description: 'התחל את המסע שלך בבינה מלאכותית',
    image: '~/assets/images/courses/beginners.jpg',
  },
  {
    title: 'AI לעורכי דין',
    description: 'יישום AI בפרקטיקה משפטית',
    image: '~/assets/images/courses/legal.jpg',
  },
];

// Latest News
const latestNews = [
  {
    title: 'Veo 2 של Google זמין כעת בפלטפורמות מרכזיות',
    author: 'אביתר אדרי',
    date: '21 באפריל, 2025',
    category: 'חדשות',
    image: '~/assets/images/hero-image.png',
  },
  {
    title: 'תובנות מדוח Anthropic על השימוש של סטודנטים ב-Claude',
    author: 'עומר הררי',
    date: '21 באפריל, 2025',
    category: 'מחקר',
    image: '~/assets/images/default.png',
  },
  {
    title: 'החזון של Microsoft ל-Copilot',
    author: 'מנהל מערכת',
    date: '20 באפריל, 2025',
    category: 'חדשות',
    image: '~/assets/images/hero-image.png',
  },
];
---

<Layout metadata={metadata}>
  <!-- Animated Main Title Section -->
  <section class="pt-2 pb-0 mb-0">
    <div class="container mx-auto px-4 text-center">
      <h1 class="gradient-animated-title text-4xl md:text-5xl lg:text-6xl font-bold mb-2">
        אתר החדשות המוביל והעדכני ביותר לבינה מלאכותית
      </h1>
      <div class="w-24 h-1 mx-auto bg-blue-500 rounded-full pulse-animation mb-3"></div>
    </div>
  </section>

  <style>
    /* Gradient animated title */
    .gradient-animated-title {
      background: linear-gradient(to right, #3b82f6, #4f46e5, #3b82f6);
      background-size: 1600px 200px;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      -webkit-text-fill-color: transparent;
      animation: animationgradienttitle 3s infinite linear forwards;
    }

    .dark .gradient-animated-title {
      background: linear-gradient(to right, #60a5fa, #818cf8, #60a5fa);
      background-size: 1600px 200px;
      -webkit-background-clip: text;
      background-clip: text;
    }

    @keyframes animationgradienttitle {
      0% {
        background-position: 0 1600px;
      }
      100% {
        background-position: 1600px 0;
      }
    }

    .pulse-animation {
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
        opacity: 1;
      }
      50% {
        transform: scale(1.1);
        opacity: 0.7;
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }
  </style>

  <!-- Featured News Section with Slider -->
  <section class="py-8 md:py-12">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold mb-8">חדשות מובחרות</h2>

      <div class="featured-news-slider relative overflow-hidden rounded-lg shadow-md">
        <div
          class="slider-container flex transition-transform duration-500 ease-in-out"
          style="transform: translateX(0%);"
        >
          {
            featuredPosts.map((post, index) => (
              <div class="slider-slide flex-shrink-0 w-full post-card" id={`slide-${index}`}>
                <div class="relative h-96 post-image-container">
                  <Image src={post.image} alt={post.title} class="w-full h-full object-cover post-image" />
                  <div class="post-overlay" />
                  <div class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 p-6 text-white">
                    <span class="inline-block bg-blue-600 text-white text-sm px-3 py-1 rounded-full mb-2 post-category">
                      {post.category}
                    </span>
                    <h3 class="text-2xl font-bold mb-2 post-title">{post.title}</h3>
                    <div class="flex items-center text-sm text-gray-300">
                      <span>{post.author}</span>
                      <span class="mx-2">•</span>
                      <span>{post.date}</span>
                    </div>
                  </div>
                </div>
              </div>
            ))
          }
        </div>

        <!-- Slider Controls -->
        <button
          class="slider-control prev absolute top-1/2 right-4 -translate-y-1/2 bg-white dark:bg-gray-800 p-2 rounded-full shadow-md z-10 control-button"
          aria-label="Previous slide"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </button>
        <button
          class="slider-control next absolute top-1/2 left-4 -translate-y-1/2 bg-white dark:bg-gray-800 p-2 rounded-full shadow-md z-10 control-button"
          aria-label="Next slide"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
        </button>

        <!-- Dots Indicator -->
        <div class="slider-dots absolute bottom-4 left-0 right-0 flex justify-center gap-2">
          {
            featuredPosts.map((_, index) => (
              <button
                class={`slider-dot w-3 h-3 rounded-full ${index === 0 ? 'bg-blue-600' : 'bg-gray-300'} hover:scale-125 transition-transform focus:outline-none`}
                data-index={index}
                aria-label={`Go to slide ${index + 1}`}
              />
            ))
          }
        </div>
      </div>
    </div>
  </section>

  <style>
    /* RTL slider styles */
    html[dir='rtl'] .slider-container {
      flex-direction: row-reverse;
    }

    .slider-slide {
      width: 100%;
      flex: 0 0 100%;
    }
  </style>

  <script>
    // Slider functionality
    document.addEventListener('DOMContentLoaded', () => {
      const sliderContainer = document.querySelector('.slider-container');
      const slides = document.querySelectorAll('.slider-slide');
      const dots = document.querySelectorAll('.slider-dot');
      const prevBtn = document.querySelector('.slider-control.prev');
      const nextBtn = document.querySelector('.slider-control.next');

      if (!sliderContainer || slides.length === 0) return;

      let currentIndex = 0;
      const slideCount = slides.length;

      // Set active state for dot indicators
      const updateDots = (index: number) => {
        dots.forEach((dot, i) => {
          dot.classList.toggle('bg-blue-600', i === index);
          dot.classList.toggle('bg-gray-300', i !== index);
        });
      };

      // Move to specific slide
      const goToSlide = (index: number) => {
        currentIndex = (index + slideCount) % slideCount;
        if (sliderContainer instanceof HTMLElement) {
          // Use same direction for both LTR and RTL to prevent image shift issues
          const direction = -1;
          const translateValue = `${currentIndex * 100 * direction}%`;
          sliderContainer.style.transform = `translateX(${translateValue})`;
        }
        updateDots(currentIndex);
      };

      // Initialize
      updateDots(0);

      // Event listeners for controls
      if (prevBtn) {
        prevBtn.addEventListener('click', () => {
          // Handle previous slide click
          goToSlide(currentIndex - 1);
        });
      }

      if (nextBtn) {
        nextBtn.addEventListener('click', () => {
          // Handle next slide click
          goToSlide(currentIndex + 1);
        });
      }

      // Event listeners for dots
      dots.forEach((dot, index) => {
        dot.addEventListener('click', () => goToSlide(index));
      });

      // Auto-play (optional)
      let interval = setInterval(() => goToSlide(currentIndex + 1), 5000);

      // Pause on hover
      sliderContainer.addEventListener('mouseenter', () => clearInterval(interval));
      sliderContainer.addEventListener('mouseleave', () => {
        clearInterval(interval);
        interval = setInterval(() => goToSlide(currentIndex + 1), 5000);
      });
    });
  </script>

  <!-- Theme-based Scrollbar Script -->
  <script>
    // Detect theme changes and apply to scrollbar
    const applyScrollbarTheme = () => {
      const isDark = document.documentElement.classList.contains('dark');

      if (isDark) {
        document.documentElement.style.setProperty('--scrollbar-track', '#1f2937');
        document.documentElement.style.setProperty('--scrollbar-thumb', '#4b5563');
      } else {
        document.documentElement.style.setProperty('--scrollbar-track', '#f1f1f1');
        document.documentElement.style.setProperty('--scrollbar-thumb', '#c1c1c1');
      }
    };

    // Apply immediately
    document.addEventListener('DOMContentLoaded', applyScrollbarTheme);

    // Observe theme changes
    const observer = new MutationObserver((mutations) => {
      mutations.forEach((mutation) => {
        if (mutation.attributeName === 'class') {
          applyScrollbarTheme();
        }
      });
    });

    observer.observe(document.documentElement, { attributes: true });

    // Also check when theme toggle is clicked
    document.addEventListener('click', (e: MouseEvent) => {
      const target = e.target as HTMLElement;
      if (target && target.closest('[data-toggle-theme]')) {
        // Allow time for class to be updated
        setTimeout(applyScrollbarTheme, 100);
      }
    });
  </script>

  <!-- Professional Guides Section -->
  <section class="py-8 bg-gray-50 dark:bg-gray-900">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold mb-8">מדריכים מקצועיים</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {
          professionalGuides.map((guide) => (
            <article class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md post-card cursor-pointer">
              <div class="mb-4 post-image-container rounded-lg overflow-hidden">
                <Image src={guide.image} alt={guide.title} class="w-full h-48 object-cover post-image" />
                <div class="post-overlay" />
              </div>
              <span class="inline-block mb-2 post-category">{guide.category}</span>
              <h3 class="text-xl font-semibold mb-4 post-title">{guide.title}</h3>
              <div class="flex items-center text-sm text-gray-600 dark:text-gray-400">
                <span>{guide.author}</span>
                <span class="mx-2">•</span>
                <span>{guide.date}</span>
              </div>
            </article>
          ))
        }
      </div>
      <div class="text-center mt-8">
        <a
          href="/guides"
          class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-md transition-colors duration-300"
        >
          צפה בכל המדריכים
        </a>
      </div>
    </div>
  </section>

  <!-- AI Tools Section -->
  <section class="py-8 md:py-12">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold mb-8">כלי AI פופולריים</h2>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
        {
          aiTools.map((tool) => (
            <article class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md post-card cursor-pointer">
              <div class="post-image-container rounded-lg overflow-hidden mb-4">
                <Image src={tool.image} alt={tool.title} class="w-full h-32 object-cover post-image" />
                <div class="post-overlay" />
              </div>
              <span class="text-3xl mb-4 block text-blue-600 dark:text-blue-400">{tool.icon}</span>
              <h3 class="text-xl font-semibold mb-2 post-title">{tool.title}</h3>
              <p class="text-gray-600 dark:text-gray-400 text-sm">{tool.description}</p>
              <span class="inline-block mt-4 post-category">{tool.category}</span>
            </article>
          ))
        }
      </div>
      <div class="text-center mt-8">
        <a
          href="/tools"
          class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-md transition-colors duration-300"
        >
          צפה בכל הכלים
        </a>
      </div>
    </div>
  </section>

  <!-- AI Courses Section -->
  <section class="py-8 bg-gray-50 dark:bg-gray-900">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold mb-8">קורסי AI</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        {
          aiCourses.map((course) => (
            <article class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden post-card cursor-pointer">
              <div class="post-image-container overflow-hidden">
                <Image src={course.image} alt={course.title} class="w-full h-48 object-cover post-image" />
                <div class="post-overlay" />
              </div>
              <div class="p-4">
                <h3 class="text-xl font-semibold mb-2 post-title">{course.title}</h3>
                <p class="text-gray-600 dark:text-gray-400">{course.description}</p>
                <div class="mt-4">
                  <span class="post-category">למד עוד</span>
                </div>
              </div>
            </article>
          ))
        }
      </div>
      <div class="text-center mt-8">
        <a
          href="/courses"
          class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-md transition-colors duration-300"
        >
          צפה בכל הקורסים
        </a>
      </div>
    </div>
  </section>

  <!-- Latest News Section -->
  <section class="py-8 bg-gray-50 dark:bg-gray-900">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold mb-8">חדשות אחרונות</h2>
      <div class="grid grid-cols-1 gap-4">
        {
          latestNews.map((news) => (
            <article class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md post-card cursor-pointer">
              <div class="flex justify-between items-start">
                <div>
                  <span class="inline-block mb-2 post-category">{news.category}</span>
                  <h3 class="text-xl font-semibold mt-2 post-title">{news.title}</h3>
                </div>
                <div class="text-sm text-gray-600 dark:text-gray-400 text-right">
                  <div>{news.author}</div>
                  <div>{news.date}</div>
                </div>
              </div>
              <div class="mt-4 post-image-container rounded-lg overflow-hidden">
                <Image src={news.image} alt={news.title} class="w-full h-48 object-cover post-image" />
                <div class="post-overlay" />
              </div>
            </article>
          ))
        }
      </div>
      <div class="text-center mt-8">
        <a
          href="/news"
          class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-md transition-colors duration-300"
        >
          צפה בכל החדשות
        </a>
      </div>
    </div>
  </section>

  <!-- Newsletter Section -->
  <CallToAction
    title="הישאר מעודכן עם חדשות AI"
    subtitle="הירשם לניוזלטר שלנו לקבלת חדשות, כלים ותובנות AI אחרונות שיישלחו ישירות לתיבת הדואר שלך."
    actions={[
      {
        variant: 'primary',
        text: 'הירשם עכשיו',
        href: '#',
        class: 'hover:scale-105 transition-transform',
      },
    ]}
  />
</Layout>
